# 整除问题进阶篇

## 整除的一些基本性质

关于整数的整除，有如下一些基本性质：  

- 性质1 整除传递性: 若 $b｜a，c｜b，$则 $c｜a$．  
- 性质2 和差整除性: 若 $c｜a，c｜b，$则 $c｜(a±b)$．  
- 性质3 若 $c｜a，c\nmid b，$则 $c \nmid (a±b)$．  
- 性质4 若 $b｜a，d｜c，$则 $bd｜ac$．  
- 性质5 若 $a=b＋c$，且 $m｜a，m｜b$，则 $m｜c$．  
- 性质6 若 $b｜a，c｜a$，则 $[b，c]｜a$, 此处$[b，c]$为 $b，c$ 的最小公倍数. 特别地，当 $(b，c)=1$ 时，$bc｜a$, 此处 $(b，c)$ 为 $b，c$ 的最大公约数．  
- 性质7 若 $c｜ab$，且 $(c，a)=1$，则 $c｜b$．特别地，若 $p$ 是素数，且 $p｜ab$，则 $p｜a$ 或 $p｜b$．  
- 性质8 若 $a≠b，n$ 是自然数，则 $(a-b)｜(a^n-b^n)$．  
- 性质9 若 $a≠-b，n$ 是正偶数，则 $(a＋b)｜(a^n-b^n)$．  
- 性质10 若 $a≠-b，n$ 是正奇数，则 $(a＋b)｜(a^n＋b^n)$．

## 模的理解

“模”是指一个计量系统的计数范围；如时钟，12个整点为计算范围，则模为12；计算机也是一个计量机器，模为32位或者64位；

32位计算机正常理解: 在模范围内能表达的有 $[0, 2^{32}-1]$；那么负数该怎么表达呢，所以出现了**补码**；也就是 **正数 + 负数** 正好达到模的溢出阀值 $2^{32}$；所以在计算机中负数是用补码方式表达的原因；

关于补码的例子：在12模的时钟中, 假设当前时针指向10点,而准确时间是6点,调整时间可有以下两种拨法:  

倒拨4小时,即：10-4=6，(10-4) mod 12 = 6  
顺拨8小时：10+8=12+6=6，(10+8) mod 12 = 6  
在以12模的系统中，加8和减4效果是一样的；因此凡是减4运算，都可以用加8来代替。对“模”而言，8和4互为补数。实际上以12模的系统中11和1、10和2、9和3、7和5、6和6都有这个特性；共同的特点是两者相加等于模。

“取模”实质上是计量器产生“溢出”的量，它的值在计量器上表示不出来，计量器上只能表示出模的余数(取模)；任何有模的计量器，均可化为加减法运算。

5 mod 3 = 2 例子中；模为3；2为取模的值。

## 计算机中取模的应用思想

取模的本质是：取模的值，必定在模的范围内；所以，计算机领域引用该特性，使元素路由算法不超出边界，并有规则存放。

首先确定模(范围)；元素取模，使元素有规则的落入模的范围内的容器中。

如：hashMap、数据库分表、分布式节点路由算法等。

## 取模和取余的区别

- 取余运算: 在计算商值时, 商值向0方向舍入(remainder()函数)；靠近原则   
  
  Python语言中的 `math.remainder(x,y)` 就是返回取余结果 $x-n\times y$，这里的 $n\times y$ 是最接近 $x$ 的数(在Python中，没有限制 $x和y$ 是整数), 不难发现此处 $n$ 为偶数。   
  
  **举例**  
  ~~~Python
    >>> import math
    >>> math.remainder(-7,-4)  # 1.0=-7-(-4)*2
    1.0
    >>> math.remainder(-7,4)  # 1.0=-7-(4)*(-2)
    1.0
    >>> math.remainder(7,-4)  # -1.0=7-(-4)*(-2)
    -1.0
    >>> math.remainder(7,4)  # -1.0=7-(4)*2
    -1.0  

    >>> math.remainder(-7,-3)  # -1.0=-7-(-3)*2
    -1.0
    >>> math.remainder(-7,3)  # -1.0=-7-(3)*(-2)
    -1.0
    >>> math.remainder(7,-3)  # 1.0=7-(-3)*(-2)
    1.0
    >>> math.remainder(7,3)  # 1.0=7-(3)*2
    1.0
  ~~~

- 取模运算: 在计算商值时, 商值向负无穷方向舍入(地板函数 floor$(x)\leq x$；尽可能让商值小的原则(不超过商值的最大值)    

  **举例:**   
  -7 mod  4= 1(商=-2, 向负无穷大方向舍入)   
  7 mod -4=-1(商=-2, 向负无穷大方向舍入)  
  -7 mod -4=-3(商=1, 靠近0原则)   
  7 mod  4= 3(商=1, 靠近0原则)

  可以用Python语言中的 `math.floor(-7/-4)` 来验证商，用 `-7%-4` 来验证取模运算(Python中用百分号 `%` 表示取模运算 mod)。

  ~~~Python
    >>> import math
    >>> math.floor(-7/-4)  # 1<-7/-4=1.25
    1
    >>> math.floor(-7/4)  # -2<-7/4=-1.25
    -2
    >>> math.floor(7/-4)  # -2<7/-4=-1.25
    -2
    >>> math.floor(7/4)  # 1<7/4=1.25
    1
    >>> -7 % -4  # -7=-4*1-3
    -3
    >>> -7 % 4  # -7=4*(-2)+1
    1
    >>> 7 % -4  # 7=-4*(-2)-1
    -1
    >>> 7 % 4  # 7=4*1+3
    3
  ~~~

## 取模和取余的计算步骤

假设有整数 $a$ 和 $b$，那么取模和取余运算可以分为两步运算：
 
(1) 求整数商：$c = a \div b$;  
(2) 计算余数：$r = a - (c\times b)$;  
(3) 计算模：$a \mathbin{\text{mod}} b = a - b\times[a\div b] \;\;(\;[a \div b]$表示整数商 $)$

### 求商、取模和取余案例

|a      |b      |求商 floor(a/b)|求余 remainder(a,b)|取模 a%b|
|---    |---    |---    |---    |---    |
|-3     |-5     |0      |2      |-3     |
|-3     |5      |-1     |2      |2      |
|3      |-5     |-1     |-2     |-2     |
|3      |5      |0      |-2     |3      |
|-3     |-4     |0      |1      |-3     |
|-3     |4      |-1     |1      |1      |
|3      |-4     |-1     |-1     |-1     |
|3      |4      |0      |-1     |3      |
|-3     |-2     |1      |1      |-1     |
|-3     |2      |-2     |1      |1      |
|3      |-2     |-2     |-1     |-1     |
|3      |2      |1      |-1     |1      |
|-4     |-3     |1      |-1     |-1     |
|-4     |3      |-2     |-1     |2      |
|4      |-3     |-2     |1      |-2     |
|4      |3      |1      |1      |1      |
|-7     |-4     |1      |1      |-3     |
|-7     |4      |-2     |1      |1      |
|7      |-4     |-2     |-1     |-1     |
|7      |4      |1      |-1     |3      |
|-7     |-3     |2      |-1     |-1     |
|-7     |3      |-3     |-1     |2      |
|7      |-3     |-3     |1      |-2     |
|7      |3      |2      |1      |1      |

上述表格使用Python程序实现的，代码如下：

~~~python
from math import remainder, floor

myList=[[-3,-5],[-3,5],[3,-5],[3,5], 
        [-3,-4],[-3,4],[3,-4],[3,4], 
        [-3,-2],[-3,2],[3,-2],[3,2], 
        [-4,-3],[-4,3],[4,-3],[4,3], 
        [-7,-4],[-7,4],[7,-4],[7,4], 
        [-7,-3],[-7,3],[7,-3],[7,3]]


if __name__ == "__main__":
    print("|a \t|b \t|求商 floor(a/b)|求余 remainder(a,b)|取模 a%b|")
    print("|--- \t|--- \t|--- \t|--- \t|--- \t|")
    for grp in myList:
        a, b = grp
        print("|{a}\t|{b}\t|{f}\t|{r}\t|{m}\t|".format(a=a,b=b,
               f=floor(a/b),r=round(remainder(a,b)),m=a%b))

~~~

### 基本性质

1. 若$p|(a-b)$，则 $a≡b (\text{mod} \;p)$。例如 $11 ≡ 4 (\text{mod}\; 7)， 18 ≡ 4(\text{mod}\; 7)$
2. 若($a$ % p)=($b$ % p) $\iff a≡b$ (% p)
3. 对称性：$a≡b$ (% p) 等价于 $b≡a$ (% p)
4. 传递性：若 $a≡b$ (% p) 且 $b≡c$ (% p)，则 $a≡c$ (% p)

    注：百分号 % 表示 取模运算 mod，以下雷同

### 运算规则

模运算与基本四则运算有些相似，但是除法例外。其规则如下：
1. ($a + b$) % p = ($a$ % p $+ b$ % p) % p 
2. ($a - b$) % p = ($a$ % p $- b$ % p) % p
3. ($a \times b$) % p = ($a$ % p $\times b$ % p) % p
4. $a ^ b$ % p = (($a$ % p)$^b$) % p  

    结合律：  
5. ($(a+b)$ % p $+ c$) % p = ($a + (b+c)$ % p) % p  
6. ($(a\times b)$ % p $\times c$)% p = ($a \times (b\times c)$ % p) % p  

    交换律：  
7. $(a + b)$ % p = $(b+a)$ % p  
8. $(a \times b)$ % p = $(b \times a)$ % p

    分配律：
9. $(a+b)$ % p = ( $a$ % p + $b$ % p )
10. $((a +b)$ % p $\times c)$ % p = $((a \times c)$ % p + $(b \times c)$ % p$)$ % p  

    重要定理
11. 若 $a≡b$ (% p)，则对于任意的 $c$，都有 $(a + c) ≡ (b + c)$ (% p)
12. 若 $a≡b$ (% p)，则对于任意的 $c$，都有 $(a \times c) ≡ (b \times c)$ (% p)
13. 若 $a≡b$ (% p)，$c≡d$ (% p)，则 $(a + c) ≡ (b + d)$ (% p)，$(a - c) ≡ (b - d)$ (% p)，
$(a \times c) ≡ (b \times d)$ (% p)

## 举例说明

### 例1

**求证：形如 $\overline{abcabc}$ 的六位数一定能被7、11、13同时整除**

证明：$\because \overline{abcabc}=\overline{abc}\times1000+\overline{abc}=\overline{abc}\times1001, 1001=7\times11\times13 \therefore 7,11,13同时整除 \overline{abcabc}$  

特殊情况下，如果 $\overline{abc}=111$, 则 $7,11,13同时整除111111$。

### 例2

已知 51位数 $\overline{\underbrace{55\cdots 5}_{25个5}\square{\underbrace{99\cdots9}_{25个9}}}$ 能被13整除，中间方格内的数字是多少？

解：  $\because 555555=5\times111111, 999999=9\times111111 \\ \qquad\therefore 13|555555,13|999999$    

$\overline{\underbrace{55\cdots 5}_{25个5}\square{\underbrace{99\cdots9}_{25个9}}} \\[1em]
=\overline{\underbrace{55\cdots 5}_{24个5}5\square9{\underbrace{99\cdots9}_{24个9}}} \\[1em]
=\underbrace{55\cdots 5}_{24个5}\times 10^{27}+\overline{5\square9}+ \underbrace{99\cdots9}_{24个9}$

只要 $13\mid \overline{5\square9}$, 原来的51位数就必能被13整除。
利用被13整除的数的截尾法，得到 $5\square+9\times4$ 能被13整除。
所以只有 $13\mid 559$,方格内填数字5.

**拓展**：能被11整除，方格内填数字 3；能被7整除，方格内也需填3.

### 例3 

**已知多位数 $\overline{81\square\underbrace{258258\cdots258}_{2020个258}}$ 能同时被7和13整除，方格内的数字是多少？**

解：采用例1的结论，以及整除的性质：和的整除性，可知，只要首3位能够倍$7\times13=91$整除，通过计算，只有 $91\mid 819$,故方格内填9.

### 例4

用数字6、7、8各两个，可以组成能被6、7、8同时整除的六位数，请写出一个满足要求的六位数。

解：采用例1方式，由6、7、8组成的三位数连写两遍，一定能被7整除，且3|(6+7+8), 只要保证末尾是偶数6或8，则这样组成的六位数必定整除6，故只要考虑能被8整除的情形。   
末三位能够被8整除，经验证，8|768，故满足条件的六位数是 768768.

### 例5

对于一个自然数N, 如果具有以下性质就被称为“破坏数”：把它添加到任何一个自然数的右端，形成的新数都不能被N+1整除。问：一共有多少个不大于10的破坏数？

解：要注意“任意自然数”，只要有一个不满足，就不是破坏数。满足两个条件：  
1. $N+1 \nmid \overline{aN}, a$为任意自然数
2. $N \leq 10,N$为0,1,2,...,10

数量不多，用枚举法即可以解决问题。

|N  |N+1    |$N+1\nmid aN$|反例或成立|
|----|-----|------|------|
|0  |1  |$1\nmid a0$|$1\mid 10$|
|1  |2  |$2\nmid a1$|成立|
|2  |3  |$3\nmid a2$|$3\mid 12$|
|3  |4  |$4\nmid a3$|成立|
|4  |5  |$5\nmid a4$|成立|
|5  |6  |$6\nmid a5$|成立|
|6  |7  |$7\nmid a6$|$7\mid56$|
|7  |8  |$8\nmid a7$|成立|
|8  |9  |$9\nmid a8$|$9\mid 18$|
|9  |10  |$10\nmid a9$|成立|
|10  |11  |$11\nmid a10$|$11\mid 110$|

结论：不大于10的破坏数有1, 3, 4, 5, 7, 9 共6个。

答：一共有6个不大于10的破坏数。

### 例6

一个五位数，它的末三位数为 999， 如果这个数能被 23 整除，那么这个五位数最小是多少？

解：
设两位数为$\overline{ab}$，则 $\overline{ab999}$ 能被23整除，

$\because 1000\times \overline{ab}+999 \\
= 43×23 \times \overline{ab}+11 \overline{ab}+43×23+10 \\
= (43×23 \times \overline{ab}+43×23)+(11 \overline{ab}+10)$

$\therefore 23 \mid (43×23 \times \overline{ab}+43×23)+(11 \overline{ab}+10)$；  

$\because 23 \mid 43×23\times \overline{ab}+43×23$，  
$\therefore 23 \mid (11\overline{ab}+10)$；  

设 $11\overline{ab}+10=23n,\; n \in \mathrm{N}^+$，
则 $\overline{ab}=(22n-11)÷11 + (n+1)÷11$，

故有 $11\mid (n+1)$，$n$ 最小为 $10$，
这时 $m$ 最小为：$(23×10-10)÷11=20$，

综上所述，所求五位数最小为 20999。

答：这个五位数最小是20999。

## 练习题

**练习1**   
已知数 $\overline{\underbrace{11\cdots1}_{2010个1} \square \underbrace{33\cdots3}_{2010个3}}$ 能被13整除，那么中间方格内的数字是多少？
$\\[7em]$

**练习2**   
已知数 $\overline{\underbrace{182182\cdots182}_{2009个182} \square \underbrace{189189\cdots189}_{2009个189}}$ 能被7和13整除，那么中间方格内的数字是多少？
$\\[7em]$

**练习3**   
写出由数字1和2组成的能被11整除的最小多位数。（1和2都要至少使用1次）
$\\[7em]$

**练习4**   
萝莉用{0,1,2,3,4,5,6,7,8,9}这10个数字组成两个多位数（10个数字都要用上，每个数字智能用一次），然后吉米将这两个数求和并把结果写在黑板上，迈克擦去了黑板上的一个数字，剩下的结果为14317，那么迈克擦去的数字是多少？
（提示：考虑9的整除特性）
$\\[7em]$

**练习5**   
一个五位数 $\overline{32\square64}$ 能被37整除，那么这个五位数是几？
$\\[7em]$

**练习6**   
用两个0，两个1，两个2，两个3，两个4组成一个十位数，使得它能同时被2、5、8、11整除，那么这样的十位数最小是多少？最大是多少？
$\\[7em]$

## 作业

1. 如果六位数 $\overline{1949\square\square}$ 能同时被3、5、7整除，那么这个六位数是多少？
$\\[7em]$

2. 已知A是一个自然数，它由数字0和2组成，且能同时被3和5整除，那么A最小是多少？
$\\[7em]$

3. 是否能在方框 $\square$ 中填入一个数字，使得 $13\mid \overline{\underbrace{11\cdots1}_{13个1} \square \underbrace{66\cdots6}_{13个6}}$。
$\\[7em]$

4. 由数字1、2、3各两个组成一个六位数，有些能同时被7和8整除，请写出一个这样的六位数。
$\\[7em]$

5. 一个多位数的末三位数是888，并且能被19整除，那么这个多位数最小是多少？
